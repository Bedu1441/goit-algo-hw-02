def check_delimiters(expression: str) -> bool:
    """
    Перевіряємо, чи правильно розставляємо дужки в рядку.
    Використовуємо стек для зберігання відкривальних дужок.
    """
    # Описуємо пари дужок: закривальна -> відповідна відкривальна
    pairs = {
        ')': '(',
        ']': '[',
        '}': '{',
    }

    # Створюємо порожній стек
    stack = []

    # Перебираємо кожен символ у виразі
    for ch in expression:
        # Перевіряємо, чи є символ відкривальною дужкою
        if ch in "([{":
            # Додаємо відкривальну дужку в стек
            stack.append(ch)

        # Перевіряємо, чи є символ закривальною дужкою
        elif ch in ")]}":
            # Перевіряємо, чи не залишаємося без пари
            if not stack:
                return False

            # Беремо останню відкривальну дужку зі стеку
            last_open = stack.pop()

            # Перевіряємо, чи підходить пара
            if pairs[ch] != last_open:
                return False

    # Перевіряємо, чи не залишаємо зайві відкривальні дужки
    return len(stack) == 0


def main():
    """
    Запускаємо перевірку виразів із дужками.
    Виводимо, чи є розділювачі симетричними.
    """
    print("Перевіряємо симетричність дужок у виразі.")
    print("Вводимо вираз і натискаємо Enter.")
    print("Вводимо 'q', щоб вийти.\n")

    while True:
        expr = input("Введіть вираз: ")

        # Перевіряємо, чи хочемо завершити роботу
        if expr.lower() == "q":
            print("Завершуємо роботу програми.")
            break

        # Викликаємо функцію перевірки
        if check_delimiters(expr):
            print(f"{expr}: Симетрично\n")
        else:
            print(f"{expr}: Несиметрично\n")


if __name__ == "__main__":
    main()
